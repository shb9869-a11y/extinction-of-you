<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
<title>SLEEEEEP STAGE SYSTEM</title>

<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap">

<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body{
    background:black;color:white;
    font-family:'Press Start 2P',monospace;
    overflow:hidden;
  }

  .scene{
    position:absolute;inset:0;
    display:flex;flex-direction:column;
    justify-content:center;align-items:center;
    opacity:0;transition:opacity 1s;
    text-align:center;
  }
  .show{opacity:1;}

  /* ÌÜ†ÎÅº Ï∫êÎ¶≠ÌÑ∞ */
  .rabbit{
    font-size:32px;
    line-height:1.2;
    white-space:pre;
    margin-top:30px;
  }

  /* ÌÉÄÏù¥Î®∏ */
  .timer{
    font-size:18px;
    margin-top:20px;
    opacity:0.8;
  }

  /* Î≤ÑÌäº */
  button{
    margin-top:30px;
    padding:14px 22px;
    background:white;color:black;
    border:none;
    font-family:'Press Start 2P';
    cursor:pointer;
  }
</style>
</head>
<body>

<!-- INTRO -->
<div id="intro" class="scene show">
  <div>SLEEEEEEEEEEP</div>
  <button onclick="goFirst()">START</button>
</div>

<!-- FIRST SLEEP -->
<div id="first" class="scene">
  <div>THE FIRST SLEEP</div>
  <div class="rabbit">(\_/)
( ‚Ä¢_‚Ä¢ )
/ >üçÄ  ></div>
  <div class="timer" id="timer1"></div>
</div>

<!-- SECOND -->
<div id="second" class="scene">
  <div>THE SECOND SLEEP</div>
  <div class="rabbit">(\_/)
( ‚Ä¢_‚Ä¢ )
/ >üçÄ  ></div>
  <div class="timer" id="timer2"></div>
</div>

<!-- THIRD -->
<div id="third" class="scene">
  <div>THE THIRD SLEEP</div>
  <div class="rabbit">(\_/)
( ‚Ä¢_‚Ä¢ )
/ >üçÄ  ></div>
  <div class="timer" id="timer3"></div>
</div>

<!-- FOURTH -->
<div id="fourth" class="scene">
  <div>THE FOURTH SLEEP</div>
  <div class="rabbit">(\_/)
( ‚Ä¢_‚Ä¢ )
/ >üçÄ  ></div>
  <div class="timer" id="timer4"></div>
</div>

<!-- SILENCE -->
<div id="silence" class="scene">
  <div>SILENCE</div>
</div>

<!-- END -->
<div id="end" class="scene">
  <div>THE END</div>
</div>

<script>
/* Ïû•Î©¥ Ï†ÑÌôò */
function show(id){
  document.querySelectorAll('.scene')
    .forEach(s=>s.classList.remove('show'));
  document.getElementById(id).classList.add('show');
}

/* 5Î∂Ñ ÌÉÄÏù¥Î®∏ */
function startTimer(duration, display, nextScene){
  let timer = duration;
  let interval = setInterval(()=>{
    let m = String(Math.floor(timer/60)).padStart(2,'0');
    let s = String(timer%60).padStart(2,'0');
    display.textContent = `TIMER  ${m}:${s}`;

    if(--timer < 0){
      clearInterval(interval);
      show(nextScene);
    }
  },1000);
}

/* START ‚Üí FIRST */
function goFirst(){
  show("first");
  startTimer(300, document.getElementById("timer1"), "second");
}

/* FIRST ‚Üí SECOND ‚Üí THIRD ‚Üí FOURTH */
document.getElementById("first").ontransitionend = function(){};
show;

function goSecond(){
  show("second");
  startTimer(300, document.getElementById("timer2"), "third");
}

function goThird(){
  show("third");
  startTimer(300, document.getElementById("timer3"), "fourth");
}

function goFourth(){
  show("fourth");
  startTimer(300, document.getElementById("timer4"), "silence");
}

/* ÏûêÎèô Ïó∞Í≤∞ */
document.getElementById("first").addEventListener("transitionend",()=>{
  if(document.getElementById("first").classList.contains("show")){
    startTimer(300, document.getElementById("timer1"), "second");
  }
});

document.getElementById("second").addEventListener("transitionend",()=>{
  if(document.getElementById("second").classList.contains("show")){
    startTimer(300, document.getElementById("timer2"), "third");
  }
});

document.getElementById("third").addEventListener("transitionend",()=>{
  if(document.getElementById("third").classList.contains("show")){
    startTimer(300, document.getElementById("timer3"), "fourth");
  }
});

document.getElementById("fourth").addEventListener("transitionend",()=>{
  if(document.getElementById("fourth").classList.contains("show")){
    startTimer(300, document.getElementById("timer4"), "silence");
  }
});

/* SILENCE ‚Üí END ÏûêÎèô 5Ï¥à ÌõÑ */
document.getElementById("silence").addEventListener("transitionend",()=>{
  if(document.getElementById("silence").classList.contains("show")){
    setTimeout(()=>show("end"), 5000);
  }
});
</script>

</body>
</html>
